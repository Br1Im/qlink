#!/bin/bash

echo "üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê BACKEND"
echo "====================="
echo ""

# –ü–æ–ª–Ω—ã–µ –ª–æ–≥–∏ backend
echo "üìã –í–°–ï –ª–æ–≥–∏ backend:"
docker logs qlink-backend

echo ""
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
echo "üîå –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã –≤ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:"
docker exec qlink-backend netstat -tlnp 2>/dev/null || docker exec qlink-backend ss -tlnp 2>/dev/null || echo "–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã"

echo ""
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
echo "‚öôÔ∏è  –ü—Ä–æ—Ü–µ—Å—Å—ã –≤ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:"
docker exec qlink-backend ps aux

echo ""
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–æ–≤
echo "üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–æ–≤:"
echo "–ü–æ—Ä—Ç 3000:"
curl -s http://localhost:3000/api/health || echo "‚ùå –ü–æ—Ä—Ç 3000 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
echo ""
echo "–ü–æ—Ä—Ç 4000:"
curl -s http://localhost:4000/api/health || echo "‚ùå –ü–æ—Ä—Ç 4000 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"

echo ""
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑ nginx
echo "üîó –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑ nginx –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:"
echo "backend:3000:"
docker exec qlink-nginx wget -q -O- http://backend:3000/api/health 2>&1 || echo "‚ùå backend:3000 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
echo ""
echo "backend:4000:"
docker exec qlink-nginx wget -q -O- http://backend:4000/api/health 2>&1 || echo "‚ùå backend:4000 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
